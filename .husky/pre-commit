echo "ðŸ”¨ Running pre-commit checks..."
echo ""

# Sync contract versions from package.json
echo "ðŸ”„ Syncing contract versions..."
node scripts/sync-version.js || exit 1
echo ""

# Stage any version changes
git add contracts/*.sol contracts/**/*.sol 2>/dev/null || true

# Compile Solidity contracts
echo "ðŸ“¦ Compiling contracts with Hardhat..."
npx hardhat compile || exit 1
echo "âœ… Compilation successful"
echo ""

# Run test suite
echo "ðŸ§ª Running test suite..."
npm test || exit 1
echo ""
echo "âœ… All pre-commit checks passed!"
